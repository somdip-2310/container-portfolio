<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>API Documentation - SnapDeploy</title>

    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
</head>
<body class="bg-gradient-to-br from-gray-900 via-purple-900 to-gray-900 min-h-screen">

    <!-- Navigation -->
    <nav class="fixed w-full z-50 bg-black/20 backdrop-blur-lg border-b border-white/10">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="flex justify-between items-center h-16">
                <a href="/" class="flex items-center">
                    <i class="fas fa-cube text-purple-400 text-2xl mr-3"></i>
                    <span class="text-white text-xl font-bold">SnapDeploy</span>
                </a>
                <div class="flex items-center space-x-4">
                    <a href="/docs" class="text-white hover:text-purple-400 transition">Docs</a>
                    <a href="/login" class="text-white hover:text-purple-400 transition">Sign In</a>
                    <a href="/register" class="bg-gradient-to-r from-purple-600 to-pink-600 text-white px-4 py-2 rounded-lg hover:from-purple-700 hover:to-pink-700 transition">
                        Get Started
                    </a>
                </div>
            </div>
        </div>
    </nav>

    <div class="pt-32 pb-20 px-4">
        <div class="max-w-7xl mx-auto">
            <!-- Header -->
            <div class="text-center mb-12">
                <h1 class="text-5xl font-bold text-white mb-4">API Reference</h1>
                <p class="text-xl text-gray-400">Complete REST API documentation for SnapDeploy</p>
                <div class="mt-6">
                    <span class="bg-purple-500/20 text-purple-300 px-4 py-2 rounded-full text-sm font-semibold">
                        Base URL: https://snapdeploy.dev/api
                    </span>
                </div>
            </div>

            <!-- Authentication -->
            <section class="bg-white/5 border border-white/10 rounded-xl p-8 mb-8">
                <h2 class="text-3xl font-bold text-white mb-4">
                    <i class="fas fa-key text-purple-400 mr-3"></i>Authentication
                </h2>
                <p class="text-gray-300 mb-4">All API requests require authentication using an API key.</p>

                <div class="bg-black/30 rounded-lg p-4 font-mono text-sm">
                    <div class="text-gray-400">curl -H "X-API-Key: your-api-key-here" \</div>
                    <div class="text-gray-400 ml-4">https://snapdeploy.dev/api/containers</div>
                </div>

                <div class="mt-4 bg-blue-500/10 border border-blue-500/20 rounded-lg p-4">
                    <p class="text-blue-300 text-sm">
                        <i class="fas fa-info-circle mr-2"></i>
                        Get your API key from <a href="/api-keys" class="text-purple-400 hover:text-purple-300 underline">API Keys page</a> in your dashboard
                    </p>
                </div>
            </section>

            <!-- Containers API -->
            <section class="bg-white/5 border border-white/10 rounded-xl p-8 mb-8">
                <h2 class="text-3xl font-bold text-white mb-6">
                    <i class="fas fa-server text-purple-400 mr-3"></i>Containers
                </h2>

                <!-- List Containers -->
                <div class="mb-8">
                    <div class="flex items-center gap-3 mb-3">
                        <span class="bg-green-500 text-white px-3 py-1 rounded text-sm font-bold">GET</span>
                        <code class="text-purple-300 text-lg">/api/containers</code>
                    </div>
                    <p class="text-gray-300 mb-4">List all containers for the authenticated user.</p>

                    <div class="bg-black/30 rounded-lg p-4 mb-3">
                        <div class="text-gray-400 text-sm mb-2">Response (200 OK):</div>
                        <pre class="text-green-400 text-sm overflow-x-auto">
[
  {
    "containerId": "cont-abc123",
    "containerName": "my-app",
    "status": "RUNNING",
    "imageName": "nginx:latest",
    "cpu": "512",
    "memory": "1024",
    "createdAt": "2025-11-26T10:00:00Z"
  }
]</pre>
                    </div>
                </div>

                <!-- Deploy Container -->
                <div class="mb-8">
                    <div class="flex items-center gap-3 mb-3">
                        <span class="bg-blue-500 text-white px-3 py-1 rounded text-sm font-bold">POST</span>
                        <code class="text-purple-300 text-lg">/api/containers/deploy</code>
                    </div>
                    <p class="text-gray-300 mb-4">Deploy a new container from a Docker image.</p>

                    <div class="bg-black/30 rounded-lg p-4 mb-3">
                        <div class="text-gray-400 text-sm mb-2">Request Body:</div>
                        <pre class="text-blue-400 text-sm overflow-x-auto">
{
  "imageName": "nginx:latest",
  "containerName": "my-app",
  "cpu": "512",
  "memory": "1024",
  "environmentVariables": {
    "PORT": "8080",
    "NODE_ENV": "production"
  }
}</pre>
                    </div>

                    <div class="bg-black/30 rounded-lg p-4">
                        <div class="text-gray-400 text-sm mb-2">Response (201 Created):</div>
                        <pre class="text-green-400 text-sm overflow-x-auto">
{
  "containerId": "cont-abc123",
  "status": "DEPLOYING",
  "message": "Container deployment started"
}</pre>
                    </div>
                </div>

                <!-- Get Container -->
                <div class="mb-8">
                    <div class="flex items-center gap-3 mb-3">
                        <span class="bg-green-500 text-white px-3 py-1 rounded text-sm font-bold">GET</span>
                        <code class="text-purple-300 text-lg">/api/containers/{containerId}</code>
                    </div>
                    <p class="text-gray-300 mb-4">Get details of a specific container.</p>
                </div>

                <!-- Stop Container -->
                <div class="mb-8">
                    <div class="flex items-center gap-3 mb-3">
                        <span class="bg-yellow-500 text-white px-3 py-1 rounded text-sm font-bold">POST</span>
                        <code class="text-purple-300 text-lg">/api/containers/{containerId}/stop</code>
                    </div>
                    <p class="text-gray-300 mb-4">Stop a running container.</p>
                </div>

                <!-- Delete Container -->
                <div>
                    <div class="flex items-center gap-3 mb-3">
                        <span class="bg-red-500 text-white px-3 py-1 rounded text-sm font-bold">DELETE</span>
                        <code class="text-purple-300 text-lg">/api/containers/{containerId}</code>
                    </div>
                    <p class="text-gray-300 mb-4">Delete a container permanently.</p>
                </div>
            </section>

            <!-- Deployments API -->
            <section class="bg-white/5 border border-white/10 rounded-xl p-8 mb-8">
                <h2 class="text-3xl font-bold text-white mb-6">
                    <i class="fas fa-rocket text-purple-400 mr-3"></i>Deployments
                </h2>

                <!-- Deploy from GitHub -->
                <div class="mb-8">
                    <div class="flex items-center gap-3 mb-3">
                        <span class="bg-blue-500 text-white px-3 py-1 rounded text-sm font-bold">POST</span>
                        <code class="text-purple-300 text-lg">/api/deployments/github</code>
                    </div>
                    <p class="text-gray-300 mb-4">Deploy directly from a GitHub repository.</p>

                    <div class="bg-black/30 rounded-lg p-4">
                        <div class="text-gray-400 text-sm mb-2">Request Body:</div>
                        <pre class="text-blue-400 text-sm overflow-x-auto">
{
  "repoUrl": "https://github.com/username/repo",
  "branch": "main",
  "containerName": "my-github-app",
  "buildCommand": "npm run build",
  "startCommand": "npm start"
}</pre>
                    </div>
                </div>

                <!-- List Deployments -->
                <div>
                    <div class="flex items-center gap-3 mb-3">
                        <span class="bg-green-500 text-white px-3 py-1 rounded text-sm font-bold">GET</span>
                        <code class="text-purple-300 text-lg">/api/deployments</code>
                    </div>
                    <p class="text-gray-300 mb-4">List all deployments with their status.</p>
                </div>
            </section>

            <!-- Logs API -->
            <section class="bg-white/5 border border-white/10 rounded-xl p-8 mb-8">
                <h2 class="text-3xl font-bold text-white mb-6">
                    <i class="fas fa-file-alt text-purple-400 mr-3"></i>Logs
                </h2>

                <div>
                    <div class="flex items-center gap-3 mb-3">
                        <span class="bg-green-500 text-white px-3 py-1 rounded text-sm font-bold">GET</span>
                        <code class="text-purple-300 text-lg">/api/logs/{containerId}</code>
                    </div>
                    <p class="text-gray-300 mb-4">Retrieve container logs.</p>

                    <div class="bg-black/30 rounded-lg p-4">
                        <div class="text-gray-400 text-sm mb-2">Query Parameters:</div>
                        <ul class="text-gray-300 text-sm space-y-1">
                            <li>• <code class="bg-white/10 px-2 py-1 rounded">startTime</code> - ISO 8601 timestamp</li>
                            <li>• <code class="bg-white/10 px-2 py-1 rounded">endTime</code> - ISO 8601 timestamp</li>
                            <li>• <code class="bg-white/10 px-2 py-1 rounded">limit</code> - Max number of log lines (default: 100)</li>
                        </ul>
                    </div>
                </div>
            </section>

            <!-- Metrics API -->
            <section class="bg-white/5 border border-white/10 rounded-xl p-8 mb-8">
                <h2 class="text-3xl font-bold text-white mb-6">
                    <i class="fas fa-chart-line text-purple-400 mr-3"></i>Metrics
                </h2>

                <div>
                    <div class="flex items-center gap-3 mb-3">
                        <span class="bg-green-500 text-white px-3 py-1 rounded text-sm font-bold">GET</span>
                        <code class="text-purple-300 text-lg">/api/metrics/{containerId}</code>
                    </div>
                    <p class="text-gray-300 mb-4">Get performance metrics for a container.</p>

                    <div class="bg-black/30 rounded-lg p-4">
                        <div class="text-gray-400 text-sm mb-2">Response:</div>
                        <pre class="text-green-400 text-sm overflow-x-auto">
{
  "cpu": {
    "current": 45.2,
    "average": 38.7,
    "max": 87.3
  },
  "memory": {
    "current": 512,
    "average": 478,
    "max": 1024
  },
  "network": {
    "bytesIn": 1048576,
    "bytesOut": 524288
  }
}</pre>
                    </div>
                </div>
            </section>

            <!-- Error Codes -->
            <section class="bg-white/5 border border-white/10 rounded-xl p-8">
                <h2 class="text-3xl font-bold text-white mb-6">
                    <i class="fas fa-exclamation-triangle text-purple-400 mr-3"></i>Error Codes
                </h2>

                <div class="space-y-3">
                    <div class="flex items-start gap-3">
                        <span class="bg-red-500 text-white px-3 py-1 rounded text-sm font-bold">400</span>
                        <div>
                            <div class="text-white font-semibold">Bad Request</div>
                            <div class="text-gray-400 text-sm">Invalid request parameters</div>
                        </div>
                    </div>
                    <div class="flex items-start gap-3">
                        <span class="bg-red-500 text-white px-3 py-1 rounded text-sm font-bold">401</span>
                        <div>
                            <div class="text-white font-semibold">Unauthorized</div>
                            <div class="text-gray-400 text-sm">Invalid or missing API key</div>
                        </div>
                    </div>
                    <div class="flex items-start gap-3">
                        <span class="bg-red-500 text-white px-3 py-1 rounded text-sm font-bold">404</span>
                        <div>
                            <div class="text-white font-semibold">Not Found</div>
                            <div class="text-gray-400 text-sm">Resource not found</div>
                        </div>
                    </div>
                    <div class="flex items-start gap-3">
                        <span class="bg-red-500 text-white px-3 py-1 rounded text-sm font-bold">429</span>
                        <div>
                            <div class="text-white font-semibold">Too Many Requests</div>
                            <div class="text-gray-400 text-sm">Rate limit exceeded</div>
                        </div>
                    </div>
                    <div class="flex items-start gap-3">
                        <span class="bg-red-500 text-white px-3 py-1 rounded text-sm font-bold">500</span>
                        <div>
                            <div class="text-white font-semibold">Internal Server Error</div>
                            <div class="text-gray-400 text-sm">Something went wrong on our end</div>
                        </div>
                    </div>
                </div>
            </section>

            <!-- CTA -->
            <div class="bg-gradient-to-r from-purple-600 to-pink-600 rounded-xl p-8 text-center mt-12">
                <h2 class="text-3xl font-bold text-white mb-4">Start Building with Our API</h2>
                <p class="text-purple-100 mb-6">Get your API key and start deploying in minutes</p>
                <div class="flex justify-center gap-4">
                    <a href="/register" class="bg-white text-purple-600 px-8 py-3 rounded-lg font-semibold hover:bg-gray-100 transition">
                        Get API Key
                    </a>
                    <a href="/docs" class="bg-transparent border-2 border-white text-white px-8 py-3 rounded-lg font-semibold hover:bg-white/10 transition">
                        View Full Docs
                    </a>
                </div>
            </div>
        </div>
    </div>

    <!-- Footer -->
    <footer class="bg-black/20 backdrop-blur-sm border-t border-white/10 py-8">
        <div class="max-w-7xl mx-auto px-4 text-center">
            <p class="text-gray-400">© 2025 SnapDeploy. All rights reserved.</p>
        </div>
    </footer>
</body>
</html>
